# 数据库
---
## 第二章 关系数据模型——关系数据库基础
---
### 2.1 关系数据结构
* 关系数据模型采用单一的数据结构，用“关系”来表示实体和实体之间的联系

**二维表**
* 具有表名
* 由表头和若干行数据两部分构成
* 有若干列，每列都有列名
* 同一列的值必须取自同一个域
* 每一行的数据代表一个实体的信息
**对二维表进行的操作**
* 增删修查
#### 数据模型常用的术语

* 关系(Relation):指一张二维表
* 元组(Tuple): 指二维表中的一行
* 属性(Attribute): 指二维表中的一列
* 码(key):也称键、关键字、关键码，指表中可唯一确定元组的属性或属性组合。
* 域(Domain):属性的取值范围
* 分量:指元组中的一个属性值
* 关系模式：对关系型的描述，表示为关系名(属性1，属性2……属性3)

#### 关系数据结构的形式化定义
* 域(Domain):域是一组具有相同数据类型的值的集合，又称值域
* 笛卡尔积(Cartesian Product):又称直积，表示为X×Y,第一个对象是X的成员而第二个对象是Y的所有可能有序对的其中一个成员。
* 关系(Relation)：笛卡尔积D1xD2x...xDn 的任一子集成为域D1,D2,...,Dn 的关系
  * 关系中元组的个数是关系的基数
  * 关系是一个二维表，表的任意一行对应一个元组，表的每一列都来自同一域。
  * 在数据库中，关系是笛卡尔积中所取得有意义的有限子集。

**关系的性质：是规范化的二维表中行的集合**
**关系模式：关系的描述**


#### 关系数据库                                                
* 概念： 在给定应用领域，所有实体及实体之间联系的关系集合构成一个关系数据库。


#### 码
* 候选码
  * 能唯一表示关系中元组的一个属性或属性集
* 主码
  * 若有多个候选码，从中选择一个作为主码
* 外码
  * 若关系R1的属性或属性集K不是R1 的主码，二十另一个关系R2的主码，则称K为关系R1的外码，并称R1为参照关系(Referencing Relation)， 关系R2为被参照关系(Referenced Relation).

#### 关系操作
**基本关系操作**
* 数据查询操作作用域对关系数据进行各种检索。
* 数据更新操作包括删除、插入、修改三种方式。
**关系代数**
* 关系代数是一种抽象的查询语言，是关系数据操纵语言的一种传统表达方式。
* 关系代数的运算分为两类：
  * 传统的集合运算
    * 以元组作为集合中元素来进行。包括并、差、交和笛卡尔积运算。
  * 专门的关系运算
    * 其运算设计行和列。包括选择、投影、连接和除法等。
      * 选择运算：单目运算 ，根据一定的条件在给定的关系中选取若干元组，组成新的关系。
        * 例：σ所在省市 = ‘江苏’（表名）
      * 投影运算：投影运算也是单目运算。符号：∏
      * 连接运算：二目运算，从两个关系的笛卡尔积中找出满足连接条件的元组，组成新的关系。符号：两个▲对着
      * 除法运算： 二目运算

    **关系演算**
* 元组演算
* 域演算

#### 数据完整性
**概念**
* 数据完整性指的是数据库中的数据在逻辑上的正确性、有效性和相容性。
* 实体完整性：关系R的主属性不能取空值，否则无法区分和识别元组。
  * 一个关系中不允许存在两类元组
    * 1. 无主码值的元组
    * 2. 主码值相同的元组
* 参照完整性：被参照关系的主码和参照关系的外码必须定义在同一个域上，并且参照关系的外码取值只能是以下两种情形之一：
  * 1. 取空值
  * 2. 取被参照关系的主码所取的值。
* 用户定义完整性： 针对数据的具体内容定义的数据约束条件，并提供检验机制。